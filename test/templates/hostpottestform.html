<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Assessment</title>
 
<script>
    function openImageMap() {
        window.open('/image-map', 'ImageMapPopup', 'width=800,height=600');
    }

    function setHotspotValue(value) {
        document.getElementById('pile_id').value = value;
    }
</script>

    <style>
        .form-group {
            margin-bottom: 15px;
        }
        .image-map-btn {
            margin-left: 10px;
            padding: 5px 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        .image-map-btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>Create Assessment</h1>
    <form id="assessmentForm" action="/submit_task_assignment" method="POST">
        <div class="form-group">
            <label for="user_id">Select User <span class="required">*</span></label>
            <select id="user_id" name="user_id" required>
                <option value="" disabled selected>Select User</option>
            </select>
        </div>

        <div class="form-group">
            <label for="pile_id">Select Pile <span class="required">*</span></label>
            <input type="text" id="pile_id" name="pile_id" placeholder="Select From Image Map" readonly>
            <button type="button" class="image-map-btn" onclick="openImageMap()">Open Image Map</button>
        </div>

        <div class="form-group">
            <label for="task_date">Task Date<span class="required">*</span></label>
            <input type="date" id="task_date" name="task_date" required>
        </div>

        <div class="form-group">
            <label for="allotted_date">Allotted Date<span class="required">*</span></label>
            <input type="date" id="allotted_date" name="allotted_date" required>
        </div>

        <div class="form-group">
            <label for="alloted_by">Alloted By <span class="required">*</span></label>
            <select id="alloted_by" name="alloted_by" required>
                <option value="" disabled selected>Select</option>
            </select>
        </div>

        <div class="form-group">
            <label for="date_completed">Date Completed</label>
            <input type="date" id="date_completed" name="date_completed">
        </div>

        <div class="form-group">
            <label for="assessment_status">Assessment Status<span class="required">*</span></label>
            <select id="assessment_status" name="assessment_status" required>
                <option value="Incomplete" selected>Incomplete</option>
                <option value="In progress">In progress</option>
                <option value="Under review">Under Review</option>
                <option value="Final">Final</option>
            </select>
        </div>

        <div class="form-group">
            <label for="assessment_case">Assessment Case<span class="required">*</span></label>
            <select id="assessment_case" name="assessment_case" required>
                <option value="None" selected>None</option>
                <option value="Corrosion1">Corrosion1</option>
                <option value="Corrosion2">Corrosion2</option>
                <option value="Corrosion3">Corrosion3</option>
            </select>
        </div>

        <div class="form-buttons">
            <input type="submit" value="Submit">
            <button type="button" class="cancel-btn" onclick="window.location.href='/dashboard'">Cancel</button>
        </div>

        <p class="required-note">* Required</p>
    </form>

    <!-- Popup message for success or failure -->
    <div id="popupMessage" class="popup"></div>
</body>
</html>
